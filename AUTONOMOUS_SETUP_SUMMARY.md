# –û—Ç—á–µ—Ç: –ü–æ–ª–Ω—ã–π –æ—Ç–∫–∞–∑ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ICE —Å–µ—Ä–≤–µ—Ä–æ–≤

**–ë—ã–ª–æ:**
```javascript
const DEFAULT_ICE_JSON = JSON.stringify([
  { urls: [
    'stun:stun.l.google.com:19302',
    'stun:stun1.l.google.com:19302',
    'stun:stun2.l.google.com:19302',
    'stun:stun3.l.google.com:19302',
    'stun:stun4.l.google.com:19302'
  ] }
])
```

**–°—Ç–∞–ª–æ:**
```javascript
const DEFAULT_ICE_JSON = JSON.stringify([
  { urls: [
    'stun:localhost:3478'
  ] },
  { urls: [
    'turn:localhost:3478?transport=udp'
  ], username: 'user', credential: 'secret' }
])
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**env.example:**
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –Ω–∞—à–µ–≥–æ TURN —Å–µ—Ä–≤–µ—Ä–∞ (–±–µ–∑ Google STUN)
VITE_ICE_JSON=[{"urls":["stun:localhost:3478"]},{"urls":["turn:localhost:3478?transport=udp"],"username":"user","credential":"secret"}]

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ä–µ–∂–∏–º (—Ç–æ–ª—å–∫–æ TURN)
# VITE_ICE_JSON=[{"urls":["turn:localhost:3478?transport=udp"],"username":"user","credential":"secret"}]
# VITE_ICE_TRANSPORT_POLICY=relay
```

### 3. –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `AUTONOMOUS_SETUP.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –û–±–Ω–æ–≤–ª–µ–Ω `README_TURN.md` —Å —Ä–∞–∑–¥–µ–ª–æ–º –æ –ø–æ–ª–Ω–æ–π –∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç–∏
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞

1. **–ù–∏–∫–∞–∫–∏—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ Google STUN —Å–µ—Ä–≤–µ—Ä–∞–º**
2. **–í—Å–µ ICE –∫–∞–Ω–¥–∏–¥–∞—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ**
3. **–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π**
4. **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**

### üîß –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### –í–∞—Ä–∏–∞–Ω—Ç 1: STUN + TURN (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
VITE_ICE_JSON=[{"urls":["stun:localhost:3478"]},{"urls":["turn:localhost:3478?transport=udp"],"username":"user","credential":"secret"}]
```
- STUN –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ IP
- TURN –¥–ª—è —Ä–µ—Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –¢–æ–ª—å–∫–æ TURN (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å)
```bash
VITE_ICE_JSON=[{"urls":["turn:localhost:3478?transport=udp"],"username":"user","credential":"secret"}]
VITE_ICE_TRANSPORT_POLICY=relay
```
- –í—Å–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏–¥—É—Ç —á–µ—Ä–µ–∑ TURN —Å–µ—Ä–≤–µ—Ä
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å—Ç—Ä–æ–≥–∏—Ö –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Å—Ä–µ–¥

#### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–æ–¥–∞–∫—à–µ–Ω (–≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø)
```bash
VITE_ICE_JSON=[{"urls":["stun:your-domain.com:3478"]},{"urls":["turn:your-domain.com:3478?transport=udp","turn:your-domain.com:3478?transport=tcp","turns:your-domain.com:5349?transport=tcp"],"username":"your_username","credential":"your_secure_password"}]
```
- –î–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- –° –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π TLS
- –° TCP fallback

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### üîí –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–ù–∏–∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ã Google**
- **–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Ç—Ä–∞—Ñ–∏–∫–æ–º**
- **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç—Ä–æ–≥–∏–º –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–º –ø–æ–ª–∏—Ç–∏–∫–∞–º**

### üöÄ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- **–ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤**
- **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ–¥ –≤–∞—à–∏ –Ω—É–∂–¥—ã**

### üè¢ –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- **–†–∞–±–æ—Ç–∞–µ—Ç –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–µ—Ç—è—Ö**
- **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π**
- **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —É—á—Ä–µ–∂–¥–µ–Ω–∏–π**

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `chrome://webrtc-internals/`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ ICE –∫–∞–Ω–¥–∏–¥–∞—Ç—ã - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –≤–∞—à–∏ —Å–µ—Ä–≤–µ—Ä—ã
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ `stun.l.google.com`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ª–æ–≥–∞—Ö
```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ TURN —Å–µ—Ä–≤–µ—Ä–∞
docker logs -f webcall-turn

# –ü–æ–∏—Å–∫ STUN –∑–∞–ø—Ä–æ—Å–æ–≤
docker logs webcall-turn | grep -i stun

# –ü–æ–∏—Å–∫ TURN –∑–∞–ø—Ä–æ—Å–æ–≤
docker logs webcall-turn | grep -i turn
```

### –°–µ—Ç–µ–≤–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
netstat -an | grep 3478

# –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –∫ Google
netstat -an | grep stun.l.google.com
```

## –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–µ—Å–∫–æ–ª—å–∫–æ TURN —Å–µ—Ä–≤–µ—Ä–æ–≤
```bash
VITE_ICE_JSON=[
  {"urls":["stun:localhost:3478"]},
  {"urls":["stun:localhost:3479"]},
  {"urls":["turn:localhost:3478?transport=udp"],"username":"user","credential":"secret"},
  {"urls":["turn:localhost:3479?transport=udp"],"username":"user","credential":"secret"}
]
```

### –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
```bash
# –ï–≤—Ä–æ–ø–∞
VITE_ICE_JSON=[{"urls":["stun:eu.your-domain.com:3478"]},{"urls":["turn:eu.your-domain.com:3478?transport=udp"],"username":"user","credential":"secret"}]

# –°–®–ê
VITE_ICE_JSON=[{"urls":["stun:us.your-domain.com:3478"]},{"urls":["turn:us.your-domain.com:3478?transport=udp"],"username":"user","credential":"secret"}]
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

‚úÖ **–ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é**

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Web Call —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–º —Ä–µ–∂–∏–º–µ:

1. **–ù–∏–∫–∞–∫–∏—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–µ—Ä–∞–º**
2. **–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π**
3. **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**
4. **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É**

### –ü—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç—å

–≠—Ç–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:
- **–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Å—Ä–µ–¥** —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **–ü—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π** —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏
- **–§–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —É—á—Ä–µ–∂–¥–µ–Ω–∏–π** —Å —Å—Ç—Ä–æ–≥–∏–º–∏ –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏
- **–õ—é–±—ã—Ö —Å—Ä–µ–¥**, –≥–¥–µ –≤–∞–∂–Ω–∞ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å

### –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —Å –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π. –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã.
